Perfect ‚Äî below is a **single, copy-paste Replit prompt** that is **fully aligned with your existing GigAid JSON + graph**, avoids refactors, and implements the **lightweight ‚ÄúPrice Confirmation‚Äù (NOT full estimates)** exactly as we discussed.

This is written the way Replit agents understand best: **clear intent, constraints, schema-first, minimal surface area**.

---

## ‚úÖ Replit Prompt: Implement Lightweight Price Confirmation (GigAid)

**Context**

We are building GigAid for solo and small-crew gig workers who get jobs from Facebook, Craigslist, texts, and DMs.

Pricing is usually discussed informally.
We do **NOT** want a traditional estimate/proposal system.

We want a **lightweight ‚ÄúPrice Confirmation‚Äù** step that:

* captures the agreed price
* requires one-tap client confirmation
* converts directly into a Job
* fits the existing Lead ‚Üí Job ‚Üí Invoice lifecycle
* does NOT introduce PDFs, contracts, or multi-line estimates

---

### üéØ Goal

Add a **Price Confirmation** feature that sits **between Lead and Job**, without breaking existing flows.

---

## 1Ô∏è‚É£ Database / Schema Changes (minimal, additive)

Create a new table:

### `price_confirmations`

Fields:

* `id` (uuid, primary key)
* `lead_id` (uuid, foreign key ‚Üí leads.id, required)
* `service_type` (string, nullable)
* `agreed_price` (numeric, required)
* `notes` (text, optional ‚Äì free-form pricing notes)
* `status` (enum: `draft`, `sent`, `viewed`, `confirmed`, `expired`)
* `confirmation_token` (string, unique, required)
* `sent_at` (timestamp, nullable)
* `viewed_at` (timestamp, nullable)
* `confirmed_at` (timestamp, nullable)
* `created_at`
* `updated_at`

Constraints:

* One active (non-expired) price confirmation per lead
* Confirmation token must be unique and URL-safe

Do **not** modify existing tables other than adding this one.

---

## 2Ô∏è‚É£ Business Rules

### Creation

* A price confirmation can only be created from an existing Lead
* Default status = `draft`

### Sending

* When sent:

  * status ‚Üí `sent`
  * `sent_at` populated
  * generate a **public confirmation link** using `confirmation_token`

### Client View (public, no login)

* Client can:

  * view service + agreed price + notes
  * tap **‚ÄúLooks good‚Äù**
* On tap:

  * status ‚Üí `confirmed`
  * `confirmed_at` populated

### Conversion (critical)

When status changes to `confirmed`:

* Automatically create a **Job**
* Populate job fields from:

  * Lead
  * PriceConfirmation (price, service type, notes)
* Preserve existing Job lifecycle logic
* Do NOT require manual job creation

---

## 3Ô∏è‚É£ UI / UX Requirements (keep it simple)

### Internal (gig worker)

* From a Lead:

  * ‚ÄúConfirm Price‚Äù button
* Simple form:

  * Price
  * Optional notes
* Status indicator:

  * Draft / Sent / Confirmed

### Client (mobile-first)

* Public page:

  * Service
  * Price
  * Notes
  * Single CTA: **‚ÄúLooks good‚Äù**
* No login
* No PDF
* No signature
* One-tap confirmation

---

## 4Ô∏è‚É£ Explicit Non-Goals (do NOT implement)

* ‚ùå No estimate PDFs
* ‚ùå No line-item labor/material breakdown
* ‚ùå No revisions or approval workflows
* ‚ùå No contracts
* ‚ùå No payment collection yet (future-ready only)

---

## 5Ô∏è‚É£ Integration Notes

* This feature should **coexist** with the current flow where Leads can still convert directly to Jobs
* Price Confirmation is optional, not mandatory
* Do not refactor existing Job, Invoice, Reminder, or Review logic
* Keep everything backward-compatible

---

## 6Ô∏è‚É£ Success Criteria

* A gig worker can turn a messy DM into:
  **Lead ‚Üí Price Confirmation ‚Üí Confirmed Job**
* Client confirmation requires **one tap**
* No additional friction for fast-moving gigs
* System is ready to layer **deposits/payments later**

---

**Proceed with implementation following these constraints exactly.**

---

If you want next, I can:

* Write the **Supabase SQL migration**
* Design the **exact mobile copy** for the client page
* Or extend this prompt to **auto-request deposits after confirmation**

Just tell me which one.
